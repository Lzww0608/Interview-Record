# Golang|Shopee一面

## 1、一个有环的链表，如何确认链表有环，环的长度。

LeetCode 142。原题为判断链表是否有环，如果有环找到环的起点。本题修改为求环的长度，基本思路一致，依然为双指针。**当快慢指针相遇之后，如果寻找环的起点，则将一个指针从起点开始与另一个指针从相遇点开始以相同速度移动，相遇点即链表起点。如果求环的长度，则将一个指针不动，另一个指针移动到静止指针的位置，移动距离即环的长度。**

```go
/**
 * Definition for singly-linked list.
 * type ListNode struct {
 *     Val int
 *     Next *ListNode
 * }
 */
func detectCycle(head *ListNode) int {
    slow, fast := head, head
    for {
        if fast == nil || fast.Next == nil {
            return -1
        }

        slow = slow.Next
        fast = fast.Next.Next

        if slow == fast {
            break
        }
    }

    slow = slow.Next
    length := 1
    for slow != fast {
        slow = slow.Next
        length++
    }

    return length
}
```



## 2、设计一个HashMap，你要用什么数据结构? 能用数组能做为存储HashMap的数据结构吗？不能的话，要怎么做？怎么解决hash冲突 你的设计里怎样根据key查找对应的值

1. **使用数组+链表或者数组+红黑树等结构**

2. 可以使用数组作为存储的数据结构

3. 可以使用链表、跳表和红黑树等数据结构替代

4. 可以使用链地址法，开放地址法（线性探测、二次探测、双重哈希等）

   

## 3、MySQL事务的隔离级别有几种，分别阐述。在串行化隔离级别中，怎么加读锁和写锁，这里的锁是什么锁：表锁？行锁？还是其他锁？

### 1. 四种事务的隔离级别

+ 读未提交
  + 在“读未提交”隔离级别下，一个事务可以读取其他事务尚未提交的修改数据。这种隔离级别可能导致以下问题：脏读，不可重复读，幻读。
+ 读已提交
  + 在“读已提交”隔离级别下，一个事务只能读取其他事务已经提交的数据。这种隔离级别消除了“脏读”（Dirty Read）问题，但仍然可能遇到“不可重复读”（Non-repeatable Read）和“幻读”（Phantom Read）问题。
+ 可重复读
  + 在“可重复读”隔离级别下，一个事务在读取某行数据时，会对该行数据加锁，从而确保在整个事务期间，该行数据不会被其他事务修改。这样可以避免“不可重复读”问题，即确保在同一事务内对同一行数据的多次读取结果是一致的。但依然无法解决幻读问题。
+ 可串行化
  + 在“可串行化”隔离级别下，数据库系统确保并发事务的执行结果与某种顺序执行这些事务的结果相同。这意味着，从并发事务执行的角度来看，它们是按顺序逐个执行的，即使它们实际上是并发执行的。

## 4、假设MySQL联合索引为<a,b,c> select * from table_name where c> 10 and a = 10 and b < 10 limit 2000,10 该语句有什么问题，如何优化

联合索引在MySQL中是按照顺序使用的，也就是说，如果你有一个联合索引 (a, b, c)，查询必须首先用到 a，然后用到 b，最后用到 c，才能完全利用索引。

优化：

```sql
SELECT * FROM table_name WHERE a = 10 AND b < 10 AND c > 10 LIMIT 2000, 10;
```

```sql
SELECT * FROM table_name
WHERE a = 10 AND b < 10
ORDER BY a, b
LIMIT 2000, 10;
```



## 5、如何查看cpu占用 top命令中idle字段的解释? 如何查看端口占用? 如何查看文件操作权限? ls -al 中 每行前10个字符的意思 如何更改文件权限

### 1. `top`命令

![img](file:///C:\Users\HP\AppData\Local\Temp\QQ_1721227941158.png)

**us** (user)：用户空间进程的CPU时间百分比，不包括nice值调整的进程。

**sy** (system)：内核空间进程的CPU时间百分比。

**ni** (nice)：用户空间内改变过优先级的进程的CPU时间百分比。

**id** (idle)：CPU空闲时间百分比。此值越高，表示系统空闲时间越多，CPU负载越低。

**wa** (iowait)：CPU等待I/O操作完成的时间百分比。

**hi** (hardware interrupt)：硬件中断时间百分比。

**si** (software interrupt)：软件中断时间百分比。

**st** (steal time)：虚拟机管理程序从虚拟机窃取的CPU时间百分比。

在我的虚拟机中，99.9 id表示当下CPU99.9%的时间是空闲的（因为我刚开机）。

## 2. 查看端口占用

1. 使用`netstat`或者`ss`命令

`-t`：显示TCP端口

`-u`：显示UDP端口

`-l`：显示监听状态的套接字

`-n`：显示数字形式的地址和端口

![img](file:///C:\Users\HP\AppData\Local\Temp\QQ_1721229155177.png)

2. `fuser`命令可以显示哪些进程正在使用指定的文件、目录或套接字。

比如查看`Redis`的端口

![img](file:///C:\Users\HP\AppData\Local\Temp\QQ_1721229466437.png)

### 3. 文件操作权限

1. ####  `ls -al` (a: 显示隐藏文件)

![img](file:///C:\Users\HP\AppData\Local\Temp\QQ_1721230475270.png)

2. #### 第一个字段10个字符含义：

**第一个字符**表示文件类型：

- `-`：普通文件
- `d`：目录
- `l`：符号链接
- `c`：字符设备文件
- `b`：块设备文件
- `s`：套接字
- `p`：命名管道

**接下来的九个字符**分为三组，每组三个字符，表示用户（user）、组（group）和其他人（others）的权限：

- 第一组（

  ```
  rw-
  ```

  ）表示用户权限（文件所有者）：

  - `r`：读取权限
  - `w`：写入权限
  - `x`：执行权限(进入目录，即`cd`命令)

- 第二组（

  ```
  r--
  ```

  ）表示组权限（与文件所有者同组的用户）：

  - `r`：读取权限
  - `w`：写入权限
  - `x`：执行权限

- 第三组（

  ```
  r--
  ```

  ）表示其他用户权限（其他所有用户）：

  - `r`：读取权限
  - `w`：写入权限
  - `x`：执行权限

  3. #### 更改文件权限

  使用`chmod`命令可以修改文件和目录的权限。

  ```bash
  chmod u+rwx filename # 赋予文件所有者读取、写入和执行权限
  chmod u=rx,g=rx,o=r filename # 赋予文件所有者和组读取和执行权限，其他人只读权限
  chmod 755 filename # 7：所有者（rwx）5：组（r-x）5：其他人（r-x）
  # 读（r）权限：值为4
  # 写（w）权限：值为2
  # 执行（x）权限：值为1
  ```

  

## 6、go 相关 介绍一下协程，协程和线程的关系 MPG模型 一个main函数内用go 开启多个协程，现在一个协程panic了，main函数会怎样？为什么？用户态和内核态



## 7、tcp相关 tcp和udp协议的区别，tcp有而udp没有的特征有哪些 tcp中滑动窗口的原理，假设窗口1,2,3已经发送，远端ack 4 ，这时候滑动窗口要向前移动吗？为什么？



## 8、http相关 http如何实现有状态连接 cookie 和session的区别



## 9、编程题 字符串加法：实现加法，但是输入和输出的数字都是字符串格式