# 字节C++电商后端三面20250517

### 一面：6.25

**网络：**

1.浏览器输入URL，发生了什么

2.DNS解析过程

## 3.DNS算法有哪些

**1. DNS解析过程算法 (递归与迭代查询)**

这不是单一的命名算法，而是DNS解析域名时遵循的一系列步骤和查询逻辑：

- **递归查询 (Recursive Query):** 当本地DNS服务器（递归解析器）收到客户端的查询请求时，它有责任返回最终的IP地址或者一个错误信息（表明域名不存在或无法解析）。如果本地DNS服务器没有缓存该记录，它将代表客户端向其他DNS服务器发起查询。
- **迭代查询 (Iterative Query):** 当递归解析器向根域名服务器、顶级域名(TLD)服务器或权威域名服务器发起查询时，这些服务器通常会进行迭代查询。这意味着，如果被查询的服务器不知道答案，它会返回一个指向下一个更接近目标域名的DNS服务器的引用（例如，根服务器指向TLD服务器，TLD服务器指向权威服务器），由递归解析器继续查询。这个过程一直持续，直到找到拥有该域名记录的权威域名服务器。

**2. DNS负载均衡算法**

DNS也常被用于实现服务器的负载均衡，通过将同一个域名解析到多个不同的IP地址，从而将访问流量分散到不同的服务器上。常见的负载均衡算法包括：

- **轮询 (Round Robin):** DNS服务器按顺序轮流返回配置的IP地址列表中的下一个IP地址。这是最简单也较常见的一种方式。
- **加权轮询 (Weighted Round Robin):** 为每个IP地址分配一个权重，权重越高的IP地址被返回的概率越大（或次数越多）。这适用于服务器性能不均的情况。
- **随机 (Random):** 从可用的IP地址列表中随机选择一个返回。
- **最少连接 (Least Connections):** （通常由更高级的负载均衡设备而非单纯DNS服务器实现，但DNS可以引导流量到这些设备）将请求导向当前活动连接数最少的服务器。
- **加权最少连接 (Weighted Least Connections):** 结合了权重和最少连接数。
- **源IP地址哈希 (Source IP Hash):** 基于客户端的IP地址进行哈希计算，然后将请求映射到特定的服务器。这样可以确保来自同一客户端的请求总是被导向同一台服务器，有助于会话保持。
- 地理位置/就近性 (GeoIP/Proximity):
  - **静态就近性:** 根据预定义的静态规则，将用户导向地理位置上或网络拓扑上最近的服务器。
  - **动态就近性:** 通过实时监测网络状况和服务器负载，动态地为用户选择最佳服务器。
- **带宽算法:** 根据服务器链路的剩余带宽或最大带宽来分配请求。

**3. DNSSEC (DNS 安全扩展) 算法**

DNSSEC通过数字签名来保证DNS数据的真实性和完整性，防止DNS欺骗和缓存投毒等攻击。DNSSEC中使用到的加密算法主要用于生成和验证签名：

- **RSA (Rivest-Shamir-Adleman):** 一种广泛使用的公钥加密算法，常与SHA哈希函数（如RSASHA256）结合使用。
- **DSA (Digital Signature Algorithm):** 另一种数字签名算法。
- **ECDSA (Elliptic Curve Digital Signature Algorithm):** 基于椭圆曲线密码的数字签名算法，通常能以更短的密钥长度提供与RSA相当的安全性。
- **EdDSA (Edwards-curve Digital Signature Algorithm):** 如Ed25519，是一种较新的签名方案，以其高性能和安全性著称。

**4. DNS缓存更新与替换算法**

DNS解析器和操作系统都会缓存DNS记录以加快后续的访问速度并减轻DNS服务器的负载。缓存的管理涉及到：

- **TTL (Time-To-Live):** 每条DNS记录都有一个TTL值，它指定了该记录可以在缓存中保留的最长时间。缓存服务器会遵守这个TTL值。当TTL过期后，缓存记录将被视为无效，下次请求时需要重新查询。
- **缓存替换策略:** 当缓存已满而需要存储新的记录时，虽然不像通用CPU缓存那样有复杂的替换算法（如LRU - Least Recently Used），但DNS缓存通常会简单地移除过期或即将过期的记录。
- **TTL改写机制:** 某些DNS服务（如内网DNS）可能会根据自身策略改写从上游服务器获取到的记录的TTL值，例如设置一个最大或最小TTL限制。
- **否定缓存 (Negative Caching):** 对于不存在的域名（NXDOMAIN响应）或查询中出现的其他错误，DNS解析器也会缓存这些否定结果一段时间，以避免对不存在的记录进行重复查询。

**5. 特定DNS服务实现中的算法**

云服务提供商或特定DNS软件可能会实现其特有的算法或逻辑：

- **最长后缀匹配 (Longest Suffix Match):** 例如，在处理专用区域 (private zones) 时，某些DNS服务会使用最长后缀匹配来确定哪个区域最具体地匹配查询请求。



4.三次握手过程

5.长连接和短连接

6.TCP如何保证可靠，讲一下拥塞控制的算法

**数据库：**

7.事务的特性

## 8.如何保证隔离性



9.锁的类型，什么情况下使用

10.讲一下MVCC

11.Myisam和Innodb的区别



## 12.什么是乐观锁，设计一个乐观锁





## 13.复合索引（A,B,C），只给A,C会怎样





**OS：**

14.进程和线程区别

15.线程有几种状态，运行态能变成就绪态吗

**算法题：**

16.接雨水

### 二面：6.28

项目：

1.查找需要更改超时时间的的节点需要多少时间



2.更改需要更改超时时间的节点需要多少时间



3.异步I/O都有哪些



4.I/O的瓶颈在于哪里



5.同步日志和异步日志的区别



**数据库：**

6.事务的特性



7.索引为什么用B+树不用平衡二叉树



8.B+树和B树的区别



**算法：**

9.上次的接雨水回去看了吗，有什么方法

10.简化路径

### 三面：6.30

项目：

1.收获在哪

**数据结构：**

2.C++ map的底层结构

**数据库：**

3.最左前缀匹配

4.数据表每个字段都建索引会怎样

**网络：**

5.TCP/IP五层模型，端口号在哪一层指定

6.数据包封装具体过程

**算法：**

7.rand3得到rand8

8.做过Web开发吗