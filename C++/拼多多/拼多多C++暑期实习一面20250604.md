# 拼多多C++暑期实习一面20250604

## 1、 一个C++源文件从文本到可执行文件经历的过程

预处理、编译（词法分析、语法分析、 语义分析、中间代码生成与优化、目标代码生成）、 链接、执行



## 2、#include 的顺序以及尖叫括号和双引号的区别

**双引号 ""**：通常用于包含**项目内部的头文件或用户自定义的头文件**。编译器一般的搜索顺序是：

1. 包含该 `#include` 指令的源文件所在的**当前目录**。
2. 通过编译器命令行选项（如 GCC/Clang 的 `-I` 选项，Visual Studio 的附加包含目录）指定的**项目特定包含目录**。
3. 最后才会去搜索**标准系统包含目录**（与尖括号查找的路径类似，但优先级较低）。 因此，`#include "my_header.h"` 会首先在当前文件旁边寻找 `my_header.h`。

**尖括号 <>**：通常用于包含**标准库头文件或已安装到系统标准位置的第三方库头文件**。编译器一般的搜索顺序是：

1. 编译器预设的**标准系统包含目录**（例如 `/usr/include`, `/usr/local/include` 等，具体路径因编译器和操作系统而异）。
2. 通过编译器命令行选项（如 `-isystem` 或某些特定环境变量）指定的系统级包含目录。 它**一般不会**在当前源文件目录中搜索。例如 `#include <vector>`。



## 3、进程和线程，为什么要有线程



## 4、C++11有哪些新特性



## 5、malloc的原理，brk系统调用干什么的，mmap呢



## 6、C++的内存管理方式，STL的allocator，最新版本默认使用的分配器





## 7、hash表的实现，包括STL中的哈希桶长度常数。





## 8、hash表如何rehash，怎么处理其中保存的资源



## 9、Redis的rehash怎么做的，为什么要渐进rehash，渐进rehash怎么实现的



## 10、Redis的定时机制怎么实现的，有哪些弊端，你将如何改进这个弊端





11、Redis是单线程的，为什么这么高效



12、Redis的数据类型有哪些，底层怎么实现



## 13、Redis和memcached的区别

**总结对比表格：**

| 特性         | Memcached            | Redis                                                        |
| ------------ | -------------------- | ------------------------------------------------------------ |
| **数据类型** | 仅字符串             | 字符串, 哈希, 列表, 集合, 有序集合, 位图, HyperLogLog, 地理空间, 流 |
| **持久化**   | 不支持               | 支持 (RDB, AOF)                                              |
| **线程模型** | 多线程               | 单线程执行命令 (I/O 可多线程)                                |
| **功能**     | 简单 (GET, SET, CAS) | 丰富 (事务, Pub/Sub, Lua脚本, 复制, 哨兵, 集群, 模块)        |
| **内存管理** | Slab Allocation      | 通用分配器, 多种淘汰策略                                     |
| **扩展性**   | 客户端分片           | 主从复制, Sentinel, Redis Cluster (自动分片)                 |
| **主要用途** | 纯缓存               | 缓存, 数据库, 消息队列, 计数器, 排行榜等                     |
| **复杂度**   | 简单                 | 相对复杂，功能更强大                                         |
| **原子操作** | CAS                  | 针对多种数据结构的原子操作, Lua脚本, 事务                    |



14、TCP的模型，状态转移



15、用过哪些设计模式，单例模式，观察者模式的多线程安全问题



16、用过多线程吗，以前的多线程代码还能怎么优化，线程池的实现



17、epoll怎么实现的，reactor模型组成



18、线程间的同步方式，最好说出具体的系统调用



## 19、哈希表的桶个数为什么是质数，合数有何不妥？

取模之后分布均匀