# 腾讯TEG

TEG 三面挂，都是电话面

#### 一面

## 1.先是项目介绍



## 2.linux熟吗？

只知道基本指令，然后没问了



## 3.c 多态，虚函数表，析构函数



## 4.除掉数组中能被三整除的数



## 5.tcp,udp区别



## 6.tcp拥塞控制

**拥塞控制 vs. 流量控制 的区别:**

| 特性         | 拥塞控制 (Congestion Control)                         | 流量控制 (Flow Control)                      |
| ------------ | ----------------------------------------------------- | -------------------------------------------- |
| **目标**     | 防止网络过载，避免网络拥塞                            | 防止接收端过载，避免接收缓冲区溢出           |
| **控制对象** | 网络 (路由器、链路等)                                 | 接收端                                       |
| **触发原因** | 网络拥塞 (丢包、延迟)                                 | 接收端处理能力不足，缓冲区满                 |
| **作用范围** | 全局性的，影响网络上的多个连接                        | 端到端的，只影响发送端和接收端之间的特定连接 |
| **反馈机制** | 基于网络反馈 (ACK到达速度、丢包)                      | 基于接收端通告的接收窗口大小 (rwnd)          |
| **主要机制** | 慢启动、拥塞避免、快速重传、快速恢复                  | 滑动窗口协议中的接收窗口 (rwnd)              |
| **关键参数** | 拥塞窗口 (cwnd)、慢启动阈值 (ssthresh)                | 接收窗口 (rwnd)                              |
| **关注点**   | 整个网络的健康和效率                                  | 特定接收端的处理能力                         |
| **后果**     | 网络性能下降，丢包，延迟增加，甚至网络崩溃 (拥塞崩溃) | 接收端丢包，数据丢失                         |



## 7.大量数据中的中位数

1. **维护两个堆：** 一个最大堆用于存储较小的一半数据，一个最小堆用于存储较大的一半数据。
2. **Reservoir Sampling (蓄水池抽样):** 从数据流中随机抽取一部分样本，然后计算样本的中位数作为整体数据的近似中位数。
3. 将数据分发到多台机器上并行处理。

"对于寻找大量数据的中位数，我们需要考虑数据量巨大导致内存无法一次性加载的问题。最简单的思路是先排序再取中间值，但这种方法在大数据下是不可行的。

对于可以分批加载的情况，可以考虑外部排序，将数据分块排序后进行归并。但这涉及到大量的磁盘I/O，效率相对较低。

更高效的方法是不完全排序，例如 Quickselect 算法，其平均时间复杂度为 O(n)，但仍然需要在内存中进行操作。对于流式数据，可以考虑维护两个堆来动态计算中位数。

当数据量达到海量级别时，我们需要考虑近似方法或分布式计算。Reservoir Sampling 可以抽取部分样本来估计中位数，但精度有限。更精确的方法是利用分治法结合统计信息，或者使用分布式计算框架如 MapReduce 或 Spark。这些框架可以将数据分发到多台机器上并行处理，大大提高了效率。

选择哪种方法取决于具体的数据量、内存限制、时间要求和精度要求。在实际应用中，我们需要根据这些因素权衡选择最合适的方案。"



## 8.链表交点



## 9.B,B+ 树



## 10.数据库索引



#### 二面

## 1.介绍缓存项目

**总结：**

| 特性         | Redis                                      | Memcached              |
| ------------ | ------------------------------------------ | ---------------------- |
| 数据结构     | 丰富 (String, List, Set, Sorted Set, Hash) | 简单 (String)          |
| 持久化       | 支持 (RDB, AOF)                            | 不支持                 |
| 内存淘汰     | 多种策略 (LRU, TTL 等)                     | LRU                    |
| 网络模型     | 单线程 (Redis 4.0+ 多线程 IO)              | 多线程                 |
| 集群与复制   | 内置 (主从, Sentinel, Cluster)             | 需要客户端或代理实现   |
| 事务         | 支持                                       | 不支持                 |
| 数据类型操作 | 丰富                                       | 简单                   |
| 主要用途     | 多功能缓存、消息队列、计数器等             | 高速缓存               |
| 性能         | 复杂场景性能优秀，单请求高效               | 简单键值对操作吞吐量高 |
| 其他特性     | Pub/Sub, Lua 脚本                          | 简单                   |

## 2.假如只给你一个定长的一维数组怎么做？key-value缓存

先说了考虑哈希，然后解决冲突的方法，线性探测法，然后面试官说空间不够的话之后的哈希冲突处理

起来时间会很长，然后我就说直接线性存储。

感觉没答好，这里可以说下redis的压缩列表。



## 3.如何设计一个视频观看网站或者手机软件？

分布式文件系统，数据备份，数据库存储元数据，然后redis做缓存balabala



## 4.有了解哪些分布式文件系统？

GFS



## 5.假如某个用户观看视频不流畅，网络问题出现在哪？让我各自分析判断是用户，还是公网网段，还是服务端。



## 6.假如是服务端出现问题，可能是哪些问题？



## 7.linux查看内存，磁盘io指令？

top，iostat

## 8.其它问题:

为什么不考研？

为什么没拿到奖学金？

主修课程是哪些？

大部分在问设计和项目，感觉还ok。

#### 三面

## 1.STL



## 2.游戏排行榜怎么设计

其实应该容易想出解决方案，不过面试中一直没理解具体要求，主要是没跟面试官沟通好。面试中我以

为需要给游戏中所有人都放进排行榜，然后榜单动态更新，但其实只需要每个人能查到自己的排名，并

不需要所有人上榜。沟通很关键。





Redis 的 Sorted Set 是一个非常适合做排行榜的数据结构，它可以根据分数（score）对成员（member）进行排序，并支持高效的排名查询。

- **数据结构：**
  - 使用一个 Sorted Set，Key 可以是类似 game_leaderboard 的固定值。
  - Member 为玩家 ID。
  - Score 为玩家的游戏分数。
- **操作：**
  - **更新分数：** 使用 ZADD key score member 命令更新或添加玩家的分数。Redis 会自动维护排序。
  - **查询排名：** 使用 ZREVRANK key member 命令查询指定玩家的排名。ZREVRANK 返回的是从高到低排序后的排名，索引从 0 开始，因此实际排名需要加 1。
- **优点：**
  - **高性能：** Redis 在内存中操作，查询和更新速度非常快。
  - **内置排序：** Sorted Set 自动维护排序，无需手动处理。
  - **原子性：** Redis 的操作是原子性的，可以保证并发更新的正确性。
  - **简单易用：** Redis 提供了丰富的命令，操作方便。
- **缺点：**
  - **内存占用：** 所有数据都存储在内存中，如果玩家数量非常庞大，内存消耗会比较高。
  - **持久化：** 需要考虑 Redis 的持久化策略 (RDB 或 AOF) 以防止数据丢失。
- **适用场景：**
  - 中小型游戏，对性能要求高，可以接受一定的内存成本。