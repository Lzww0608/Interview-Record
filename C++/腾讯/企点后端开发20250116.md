# 企点后端开发20250116

#### 腾讯一面，走的牛客网的平台，视频面。

时间是昨天晚上8点

问题：

## 说一说你实现的reactor模式的服务器 的架构

事件驱动、非阻塞I/O，事件分发

**核心组件：**

1. **Handle (句柄):** 代表操作系统资源，例如文件描述符 (sockets, files, pipes)。每个并发连接都有一个对应的 Handle。
2. **Event Demultiplexer (事件分离器 / 多路复用器):** 这是 Reactor 模式的核心。它负责监听多个 Handle 上的事件，并在事件发生时通知 Reactor。常见的 Event Demultiplexer 实现包括：
   - **select()** (较老，效率较低)
   - **poll()** (改进的 select())
   - **epoll()** (Linux 特有，高性能)
   - **kqueue()** (BSD/macOS 特有，高性能)
   - **IOCP()** (Windows 特有，基于完成端口)
3. **Reactor (反应器):** 是整个架构的中心调度者。它的主要职责是：
   - **注册/注销事件处理器 (Event Handler):** 将特定的 Handle 和对应的 Event Handler 关联起来，并告知 Event Demultiplexer 关注哪些 Handle 的哪些事件。
   - **接收事件通知:** 当 Event Demultiplexer 检测到某个 Handle 上发生了感兴趣的事件时，会通知 Reactor。
   - **派发事件:** 根据事件类型和发生事件的 Handle，查找并调用对应的 Event Handler 来处理该事件。
4. **Event Handler (事件处理器):** 负责处理特定类型的事件。每个 Event Handler 都与一个或多个 Handle 关联，并实现特定的业务逻辑。常见的 Event Handler 类型包括：
   - **AcceptEventHandler:** 处理新的连接请求事件。
   - **ReadEventHandler:** 处理可读事件（接收客户端数据）。
   - **WriteEventHandler:** 处理可写事件（向客户端发送数据）。
   - **CloseEventHandler:** 处理连接关闭事件。

## reactor模式是什么

通过非阻塞 I/O 和事件驱动，实现了单线程处理高并发连接的目标



## read系统调用会有哪些错误，你处理过哪些？

"read 系统调用用于从一个打开的文件描述符读取数据到指定的缓冲区中。当 read 调用失败时，它会返回 -1，并设置全局变量 errno 来指示具体的错误原因。常见的错误包括：EBADF 表示文件描述符无效；EFAULT 表示缓冲区指针指向无效内存；EINVAL 表示参数不合法。在 I/O 过程中，可能会遇到 EIO 这样的硬件错误。对于非阻塞 I/O，如果当前没有数据可读，会返回 EAGAIN 或 EWOULDBLOCK。如果 read 在执行过程中被信号中断，会返回 EINTR。对于套接字，可能还会遇到 ECONNRESET（连接被对方重置）等网络相关的错误。重要的是，在 read 返回 -1 后，我们需要检查 errno 的值来判断具体的错误类型，并采取相应的处理措施。"

## 你实现的服务器处理过哪些中断信号？说一说



## 对一个关闭的socket发起写的请求会发生什么中断？

1. **write 或 send 系统调用会失败并返回 -1。**
2. **errno 会被设置为 EPIPE (Broken pipe)。**
3. **操作系统会向发起写请求的进程发送 SIGPIPE 信号。**



## 守护进程是什么？





## 要你实现一个守护进程，你会怎么实现？有没有看过守护进程的实现源码？



## 在一个进程执行某个函数的时候 成为一个守护进程，知道细节是什么？



## gevent是什么？



## gevent的好处是什么？



## 说一说gevent的实现细节



## 协程的切换在什么时候？

协程的切换发生在**程序代码中预先定义的“yield points”或由协程运行时环境管理的关键时刻**。与线程的抢占式调度不同，协程的切换是**协作式**的，这意味着协程只有在主动让出执行权时才会发生切换。或者`goroutine`中加入了抢占式调度。



## 如果在发送一个数据的时候，调用这个函数，你觉得什么时候会切换？



## 如何实现协程的自动切换？说出你的想法。使用epoll

1. 非阻塞I/O，发生事件的时候切换
2. 时间片轮转
3. 优先级
4. `yield`



## 在写数据的时候返回怎样的错误的时候，你可以去切换？



## c 的运行时多态怎么实现的？

1. 函数指针：
2. 虚表：存储子类的函数指针



## 析构函数可以抛异常么？说出原因

不应该

- **导致 std::terminate():** 在栈展开期间抛出异常会中断异常处理机制，可能导致程序立即终止。
- **资源泄漏:** 提前终止可能导致后续对象的析构函数无法执行，资源无法释放。
- **状态不一致:** 部分对象被销毁，部分未被销毁，程序状态混乱。
- **难以处理:** 从析构函数抛出的异常难以被有效捕获和处理。

## golang 的协程 说一下你的理解



## golang当中的协程是占用一个cpu还是会被调度到不同的cpu？



## TCP的流量控制的方式



## 接收方的读缓冲区为0，当读缓冲区读完的时候，发送方如何知道该发送了？



## 说说熔断机制



## 说说timewait，为什么有这个等待

等待第三次握手，确认收到机制，防止攻击

## 快排的最坏复杂度是多少

O(n^2)

## 如何优化快排

三路

**算法：**

o(n)时间，1个变量实现洗牌

不用变量交换两个整型有什么方式，实现一下。

写一个优化版本的快排

#### 二面：电话面

时间是今天下午3点

## 实习时间



## 介绍一下之前做的CRM项目



## 这个架构的瓶颈点在哪里？



## 为什么apigateway层不做无状态的，可以平行扩容



## redis用的是单机版还是集群？



## redis的数据备份和恢复有哪些？

RDB, AOF

## 两种备份方式的优缺点是什么？



- 说一下关于k8s的项目
- 说一下websocket和http协议的区别以及优化
- websocket是怎么实现服务器往客户端推消息的？
- HTTP协议为什么不支持？
- 长连接为什么不行？
- 有什么问题想问？

这边主要是做智能客服的大后台。基于QQ资源。做微服务。

然后就说是后面是总监面和hr面，让我保持电话畅通。。。。

#### 今天六点接着三面（主管面）：

1. 实习时间

   

2. 毕业时间

3. 为什么没有继续之前的实习是什么考虑？

4. 之前实习工作，哪个工作是最深的？

5. 这个系统是用什么语言？为什么选择python？

6. 这个系统的模型是什么样的？上下游是什么？

7. 用的存储是什么？

8. redis出问题了怎么办？

9. 说一下你的其他的项目一个一个说一下

10. 线程池的实现细节。说一下

11. 用的锁是什么锁？

12. 数据库这块接触过什么？

13. mysql引擎用的是什么？优缺点说一下

14. 为什么查询比较快？

15. 是不是关系型数据库都可以建立索引？为什么？

16. c++这一块比较熟悉吧？ 有没有什么类是不能被继承的？

17. tcp三次握手说一下

18. 第一次发的序列号怎么产生的？

19. 序列号为什么是随机的？能不能固定从1开始？为什么？

20. 两次握手可不可以？有什么后果？

21.对腾讯了解多少，你最看重腾讯的什么？

1. 再次确定实习时间

   

2. 对于工作地点的考虑是什么？

3. 对我们这边有什么想了解的？

最后就是保持电话畅通。

#### hr面：

隔了一周多 终于等到了hr小姐姐的电话，几个问题：

1.为什么做这个方向

2.为什么选择这里

3.对于工作的预期

4.对于工作地点的想法

5.对于这个方向有没有行业上的了解

最后就是说3月底四月初的时候会统一发实习offer

总结：腾讯的后台的面试总体感觉还是很愉快的，然后就是做的是企点这块的，虽然我之前投的是云计算相关。。。但是被企点大后台捞起来面试