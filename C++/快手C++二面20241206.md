# 快手C++二面20241206

自我介绍

- 一亿数据插入查找，unordered_map和map怎么选？

无需选择哈希，有序红黑树



- n层二叉平衡树，最少有多少个节点？

f(n) = f(n-1) + f(n-2) + 1   (n>=3)。



- 用了线程池，为什么用线程池？

  优点：减少线程创建销毁开销，方便管理生命周期，提高并发性能，
  
  缺点：管理资源复杂性较高，不适用于生命周期较短的因为上下文切换开销大，死锁



- 可以用多进程吗？

  创建销毁开销大，通信代价高
  
  不必担心线程安全问题，适用于需要独立地址，计算或者I/O密集型任务



- mmap一般用来干嘛？

  映射文件：减少数据拷贝，提高 IO 效率

​     0拷贝 mmap+write

​           sendfile



​    共享内存：进程间通信

​       nginx 惊群 accept_mutex 共享内存->锁



​    申请内存：可动态扩缩

​    动态库加载：节省内存



- 进程有哪些通信方法？

  1-2-1-进程间通信



- tcp三次握手会交换哪些信息？

  **客户端和服务器各自的初始序列号（ISN）**。
  
  **确认号**：确认对方的初始序列号。
  
  **连接参数**：如窗口大小、最大报文段长度（MSS）、选项等。



- 把用户数据复制到磁盘需要经历哪些缓冲区？

  将用户数据复制到磁盘需要经历用户缓冲区、内核缓冲区、磁盘控制器缓冲区（可能涉及）以及磁盘缓存（如果可用）等多个层次的缓冲和交互。



- 如果cpu利用率过高，你会怎么排查问题？

     代码bug，比如死循环。
  
  ​    IO高了，导致CPU爆了。
  
  ​    特殊程序耗CPU。
  
  查看`htop`